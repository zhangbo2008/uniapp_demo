(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["minePages-set"],{"0010":function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 下方引入的为Tuniao UI的集成样式文件，为scss预处理器，其中包含了一些"tn-"开头的自定义变量\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\n * Tuniao UI自定义的css类名和scss变量，均以"tn-"开头，不会造成冲突，请放心使用 \n */\n/* 用户头像 start */.logo-image[data-v-2dd72608]{width:%?210?%;height:%?210?%;position:relative}.logo-pic[data-v-2dd72608]{background-size:cover;background-repeat:no-repeat;background-position:top;border:%?8?% solid hsla(0,0%,100%,.05);box-shadow:%?0?% %?0?% %?80?% %?0?% rgba(0,0,0,.15);border-radius:50%;overflow:hidden}.bg-flex-shadow[data-v-2dd72608]{background-color:#00c3ff;z-index:9999}\n/* 胶囊*/.tn-custom-nav-bar__back[data-v-2dd72608]{width:100%;height:100%;position:relative;display:flex;justify-content:space-evenly;align-items:center;box-sizing:border-box;background-color:rgba(0,0,0,.15);border-radius:%?1000?%;border:%?1?% solid hsla(0,0%,100%,.5);color:#fff;font-size:18px}.tn-custom-nav-bar__back .icon[data-v-2dd72608]{display:block;flex:1;margin:auto;text-align:center}.tn-custom-nav-bar__back[data-v-2dd72608]:before{content:" ";width:%?1?%;height:110%;position:absolute;top:22.5%;left:0;right:0;margin:auto;-webkit-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:0 0;transform-origin:0 0;pointer-events:none;box-sizing:border-box;opacity:.7;background-color:#fff}\n/* 底部悬浮按钮 start*/.tn-tabbar-height[data-v-2dd72608]{min-height:%?100?%;height:calc(%?120?% + env(safe-area-inset-bottom) / 2)}.tn-footerfixed[data-v-2dd72608]{position:fixed;width:100%;bottom:calc(%?30?% + env(safe-area-inset-bottom));z-index:1024;box-shadow:0 %?1?% %?6?% transparent}\n/* 底部悬浮按钮 end*/\n/* 标签内容 start*/.tn-tag-content__item[data-v-2dd72608]{display:inline-block;line-height:%?45?%;padding:%?10?% %?30?%;margin:%?20?% %?20?% %?5?% %?0?%}.tn-tag-content__item--prefix[data-v-2dd72608]{padding-right:%?10?%}.tn-shadow-blurddd[data-v-2dd72608]{border:2px solid #000}\n/* 标签内容 end*/',""]),t.exports=e},"0129":function(t,e,i){"use strict";i.r(e);var a=i("b079"),n=i("7cff");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("a11b");var s=i("828b"),r=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"778c77a3",null,!1,a["a"],void 0);e["default"]=r.exports},"05f3":function(t,e,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa"),i("5ef2"),i("f7a5"),i("20f3"),i("4626"),i("5ac7");var n=a(i("f104")),o={mixins:[n.default],name:"tn-button",behaviors:["wx://form-field-button"],props:{index:{type:[Number,String],default:0},shape:{type:String,default:"default"},shadow:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:""},size:{type:String,default:""},fontBold:{type:Boolean,default:!1},padding:{type:String,default:"0 30rpx"},margin:{type:String,default:""},plain:{type:Boolean,default:!1},border:{type:Boolean,default:!0},borderBold:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},formType:{type:String,default:""},openType:{type:String,default:""},blockRepeatClick:{type:Boolean,default:!1}},computed:{buttonClass:function(){var t="";switch(this.shape){case"icon":case"round":t+=" tn-round";break}if(this.shadow)if(""!==this.backgroundColorClass&&-1!=this.backgroundColorClass.indexOf("tn-bg")){var e=this.backgroundColor.slice(this.backgroundColor.lastIndexOf("-")+1);t+=" tn-shadow-".concat(e)}else t+=" tn-shadow-blur";if(this.fontBold&&(t+=" tn-text-bold"),this.plain&&(t+=" tn-btn--plain",this.border&&(t+=" tn-border-solid",this.borderBold&&(t+=" tn-bold-border"),""!==this.backgroundColor&&this.backgroundColor.includes("tn-bg")))){var i=this.backgroundColor.slice(this.backgroundColor.lastIndexOf("-")+1);t+=" tn-border-".concat(i)}return t},buttonStyle:function(){var t={};switch(this.size){case"sm":t.padding="0 20rpx",t.fontSize="22rpx",t.height=this.height||"48rpx";break;case"lg":t.padding="0 40rpx",t.fontSize="32rpx",t.height=this.height||"80rpx";break;default:t.padding="0 30rpx",t.fontSize="28rpx",t.height=this.height||"64rpx"}return this.padding&&(t.padding=this.padding),this.margin&&(t.margin=this.margin),this.fontSize&&(t.fontSize=this.fontSize+this.fontUnit),t.width="icon"===this.shape?t.height:this.width,t.padding="icon"===this.shape?"0":t.padding,this.fontColorStyle&&(t.color=this.fontColorStyle),this.backgroundColorClass||(this.plain?t.borderColor=this.backgroundColorStyle||"#080808":t.backgroundColor=this.backgroundColorStyle||"#FFFFFF"),this.shadow&&!this.backgroundColorClass&&(-1!=this.backgroundColorStyle.indexOf("#")?t.boxShadow="6rpx 6rpx 8rpx ".concat(this.backgroundColorStyle||"#000000","10"):-1==this.backgroundColorStyle.indexOf("rgb")&&-1==this.backgroundColorStyle.indexOf("rgba")&&this.backgroundColorStyle||(t.boxShadow="6rpx 6rpx 8rpx ".concat(this.backgroundColorStyle||"rgba(0, 0, 0, 0.1)"))),t}},data:function(){return{clickTime:0,clickIntervalTime:200}},methods:{handleClick:function(){var t=this;if(!this.disabled){if(this.blockRepeatClick){var e=(new Date).getTime();if(e-this.clickTime<=this.clickIntervalTime)return;this.clickTime=e,setTimeout((function(){t.clickTime=0}),this.clickIntervalTime)}this.$emit("click",{index:Number(this.index)}),this.$emit("tap",{index:Number(this.index)})}},handleGetUserInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.detail,i=void 0===e?{}:e;this.$emit("getuserinfo",i)},handleContact:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.detail,i=void 0===e?{}:e;this.$emit("contact",i)},handleGetPhoneNumber:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.detail,i=void 0===e?{}:e;this.$emit("getphonenumber",i)},handleError:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.detail,i=void 0===e?{}:e;this.$emit("error",i)}}};e.default=o},"0adc":function(t,e,i){"use strict";i.r(e);var a=i("637a"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"20f3":function(t,e,i){"use strict";var a=i("8bdb"),n=i("5145");a({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},"2ab5":function(t,e,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("2634")),o=a(i("2fdc")),s=i("2158"),r=a(i("c8e8")),c={name:"TemplateCreate",mixins:[r.default],data:function(){return{truehead:"",isRound:!0,imageUrl:"",show:!1,avatar:"",body:[],action:"",title:"",dec:""}},onLoad:function(t){this.action=s.host+"/api/user/up_img",this.info()},methods:{close:function(){this.show=!1},chooseAvatarEvent:function(t){this.cropperImageUrl=t.detail.avatarUrl,this.avatar=t.detail.avatarUrl},chooseImage:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var i=e.tempFilePaths[0];t.imageUrl=i,t.show=!0}})},cropperFinish:function(t){t.url&&(this.cropperImageUrl=t.url),t.base64&&(this.cropperImageUrl="".concat(t.base64)),this.avatar=this.cropperImageUrl,this.show=!1},info:function(){var t=this;return(0,o.default)((0,n.default)().mark((function e(){var i,a;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,e.next=3,i.$request({loading:1,method:"post",url:"/api/index/GetUser",data:{}});case 3:a=e.sent,200==a.statusCode?200==a.data.code?(i.body=a.data.data.userinfo,i.title=i.body.nickname,i.dec=i.body.dec,i.avatar=i.body.avatar,i.truehead=i.body.truehead):uni.showToast({icon:"none",title:a.data.msg}):uni.showToast({icon:"none",title:i.$errorMsg});case 5:case"end":return e.stop()}}),e)})))()},uploadSuccess:function(){var t=this;uni.showToast({title:"上传成功"}),uni.uploadFile({url:this.action,filePath:this.cropperImageUrl,name:"file",formData:{token:uni.getStorageSync("token"),user:"test"},success:function(e){var i=JSON.parse(e.data);t.avatar=s.host+i.data.file,t.truehead=i.data.file,t.post()}})},send:function(){""!=this.title?this.cropperImageUrl?this.uploadSuccess():this.post():this.msg("请输入昵称")},post:function(){var t=this;return(0,o.default)((0,n.default)().mark((function e(){var i,a;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,e.next=3,i.$request({loading:1,method:"post",url:"/api/user/set",data:{nickname:i.title,dec:i.dec,avatar:i.truehead}});case 3:a=e.sent,200==a.statusCode?200==a.data.code?(uni.hideLoading(),i.msg("修改成功")):uni.showToast({icon:"none",title:a.data.msg}):uni.showToast({icon:"none",title:i.$errorMsg});case 5:case"end":return e.stop()}}),e)})))()}}};e.default=c},"3f53":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={tnNavBar:i("eeb1").default,tnButton:i("0129").default,tnCropper:i("76c0").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"template-create tn-safe-area-inset-bottom"},[i("tn-nav-bar",{attrs:{fixed:!0,isBack:!0}},[t._v("资料修改")]),i("v-uni-view",{staticClass:"tn-safe-area-inset-bottom ",style:{paddingTop:t.vuex_custom_bar_height+"px"}},[i("v-uni-view",{staticClass:"tn-flex tn-flex-row-between tn-flex-col-center  tn-margin "},[i("v-uni-view",{staticClass:"tn-flex justify-content-item"},[i("v-uni-view",{staticClass:"tn-bg-black tn-color-white tn-text-center",staticStyle:{"border-radius":"100rpx","margin-right":"8rpx",width:"45rpx",height:"45rpx","line-height":"45rpx"}},[i("v-uni-text",{staticClass:"tn-icon-image",staticStyle:{"font-size":"30rpx"}})],1),i("v-uni-view",{staticClass:"tn-text-lg tn-padding-right-xs tn-text-bold"},[t._v("编辑我的资料")])],1),i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.send()}}},[i("tn-button",{attrs:{backgroundColor:"#00FFC6",padding:"40rpx 0",width:"80px",shadow:!0,fontBold:!0}},[i("v-uni-text",{staticClass:"tn-color-black"},[t._v("保存")])],1)],1)],1),i("tn-cropper",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],attrs:{imageUrl:t.imageUrl,isRound:t.isRound},on:{cropper:function(e){arguments[0]=e=t.$handleEvent(e),t.cropperFinish.apply(void 0,arguments)},closecopper:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"user-info__container tn-flex tn-flex-direction-column tn-flex-col-center tn-flex-row-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImage()}}},[i("v-uni-view",{staticClass:"user-info__avatar  tn-flex tn-flex-col-center tn-flex-row-center",staticStyle:{position:"relative"}},[i("v-uni-view",{staticClass:"logo-pic tn-shadow"},[i("v-uni-view",{staticClass:"logo-image"},[i("v-uni-view",{staticClass:"tn-shadow-blur",style:"background-image:url("+t.avatar+");width: 210rpx;height: 210rpx;background-size: cover;"})],1)],1),i("v-uni-view",{staticClass:"tn-icon-camera-fill tn-color-red",staticStyle:{left:"80px",position:"absolute",top:"80px","font-size":"40px"}})],1)],1),i("v-uni-view",{staticClass:" tn-text-bold  clamp-text-1 tn-text-justify tn-margin "},[t._v("昵称"),i("v-uni-text",{staticClass:"tn-color-red"},[t._v("*")])],1),i("v-uni-view",{staticClass:"tn-margin tn-bg-gray--light",staticStyle:{"border-radius":"10rpx",padding:"20rpx 30rpx"}},[i("v-uni-input",{attrs:{placeholder:"给自己取号好听的名字吧",maxlength:"10","placeholder-style":"color:#AAAAAA",type:"nickname"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("v-uni-view",{staticClass:" tn-text-bold  clamp-text-1 tn-text-justify tn-margin "},[t._v("签名"),i("v-uni-text",{staticClass:"tn-color-red"},[t._v("*")])],1),i("v-uni-view",{staticClass:"tn-margin tn-bg-gray--light tn-padding",staticStyle:{"border-radius":"10rpx"}},[i("v-uni-textarea",{attrs:{maxlength:"100",placeholder:"写点有意思的签名吧(100字以内)","placeholder-style":"color:#AAAAAA"},model:{value:t.dec,callback:function(e){t.dec=e},expression:"dec"}})],1)],1)],1)},o=[]},4813:function(t,e,i){"use strict";e["a"]=function(t){(t.options.wxs||(t.options.wxs={}))["wxs"]=function(t){var e={cutX:0,cutY:0,touchRelactive:[{x:0,y:0}],hypotenuseLength:0,touchEndFlag:!1,canvasWidth:0,canvasHeight:0,imgWidth:0,imgHeight:0,scale:1,angle:0,imgTop:0,imgLeft:0,windowWidth:0,windowHeight:0,init:!0};function i(t){var i=.5*(e.windowWidth-e.canvasWidth),n=.5*(e.windowHeight-e.canvasHeight);e.imgTop=e.imgTop-e.cutY+n,e.cutY=n,e.imgLeft=e.imgLeft-e.cutX+i,e.cutX=i,a(t),r(t),c(t)}function a(t){var i=e.windowHeight,a=e.windowWidth,n=function(){e.cutY<0&&(e.cutY=0),e.cutY>i-e.canvasHeight&&(e.cutY=i-e.canvasHeight)},o=function(){e.cutX<0&&(e.cutX=0),e.cutX>a-e.canvasWidth&&(e.cutX=a-e.canvasWidth)};if(null===e.cutX&&null===e.cutY){var s=.5*(a-e.canvasWidth),r=.5*(i-e.canvasHeight);e.cutX=s,e.cutY=r}else null!==e.cutX&&null!==e.cutX?(n(),o()):null!==e.cutX&&null===e.cutY?(o(),e.cutY=(i-e.canvasHeight)/2):null===e.cutX&&null!==e.cutY&&(n(),e.cutX=(a-e.canvasWidth)/2)}function n(t,i){var a=e.scale,n=e.imgWidth,s=e.imgHeight;e.angle/90%2&&(n=e.imgHeight,s=e.imgWidth),n*a<e.canvasWidth&&(a=e.canvasWidth/n),s*a<e.canvasHeight&&(a=Math.max(a,e.canvasHeight/s)),o(t,a,i)}function o(t,i,a){var n=e.imgLeft,o=e.imgTop,s=e.imgWidth,c=e.imgHeight;i=i||e.scale,e.angle/90%2&&(s=e.imgHeight,c=e.imgWidth),n=e.cutX+s*i/2>=n?n:e.cutX+s*i/2,n=e.cutX+e.canvasWidth-s*i/2<=n?n:e.cutX+e.canvasWidth-s*i/2,o=e.cutY+c*i/2>=o?o:e.cutY+c*i/2,o=e.cutY+e.canvasHeight-c*i/2<=o?o:e.cutY+e.canvasHeight-c*i/2,e.imgLeft=n,e.imgTop=o,e.scale=i,a&&"null"!==a||r(t)}function s(t){e.canvasWidth>e.windowWidth?e.canvasWidth=e.windowWidth:e.canvasWidth+e.cutX>e.windowWidth&&(e.cutX=e.windowWidth-e.cutX),e.canvasHeight>e.windowHeight?e.canvasHeight=e.windowHeight:e.canvasHeight+e.cutY>e.windowHeight&&(e.cutY=e.windowHeight-e.cutY)}function r(t){var i=t.selectComponent(".tn-cropper__image");if(i){var a=e.imgLeft-e.imgWidth/2,n=e.imgTop-e.imgHeight/2;i.setStyle({transform:"translate3d("+a+"px,"+n+"px,0) scale("+e.scale+") rotate("+e.angle+"deg)"})}}function c(t){t&&t.callMethod("change",{cutX:e.cutX,cutY:e.cutY,imgWidth:e.imgWidth,imgHeight:e.imgHeight,scale:e.scale,angle:e.angle,imgTop:e.imgTop,imgLeft:e.imgLeft})}return t.exports={touchStart:function(t,i){var a=t.touches||t.changedTouches;if(e.touchEndFlag=!1,1===a.length)e.touchRelactive[0]={x:a[0].pageX-e.imgLeft,y:a[0].pageY-e.imgTop};else{var n=Math.abs(a[0].pageX-a[1].pageX),o=Math.abs(a[0].pageY-a[1].pageY);e.touchRelactive=[{x:a[0].pageX-e.imgLeft,y:a[0].pageY-e.imgTop},{x:a[1].pageX-e.imgLeft,y:a[1].pageY-e.imgTop}],e.hypotenuseLength=Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}},touchMove:function(t,i){var a=t.touches||t.changedTouches;if(!e.touchEndFlag)if(function(t){if(!t)return;t.callMethod("moveDuring")}(i),1===t.touches.length){var s=a[0].pageX-e.touchRelactive[0].x,c=a[0].pageY-e.touchRelactive[0].y;e.imgLeft=s,e.imgTop=c,r(i),o(i)}else{var d=t.instance.getDataset(),l=+d.minscale,u=+d.maxscale,h=Math.abs(a[0].pageX-a[1].pageX),g=Math.abs(a[0].pageY-a[1].pageY),f=Math.sqrt(Math.pow(h,2)+Math.pow(g,2)),p=e.scale*(f/e.hypotenuseLength);p=p<=l?l:p,p=p>=u?u:p,e.scale=p,n(i,!0);var m=[{x:a[0].pageX-e.imgLeft,y:a[0].pageY-e.imgTop},{x:a[1].pageX-e.imgLeft,y:a[1].pageY-e.imgTop}];e.touchRelactive=m,e.hypotenuseLength=Math.sqrt(Math.pow(h,2)+Math.pow(g,2)),e.angle=e.angle+0,r(i)}},touchEnd:function(t,i){e.touchEndFlag=!0,function(t){if(!t)return;t.callMethod("moveStop")}(i),c(i)},propsChange:function(t,o,c,d){if(t&&"null"!==t){var l=t.split(","),u=+l[0],h=d.getDataset();switch(e.init||4==u?(e.canvasWidth=+h.width,e.canvasHeight=+h.height,e.imgTop=+h.windowheight/2,e.imgLeft=+h.windowwidth/2,e.imgWidth=+h.imgwidth,e.imgHeight=+h.imgheight,e.windowHeight=+h.windowheight,e.windowWidth=+h.windowwidth,e.init=!1):2!=u&&3!=u||(e.imgWidth=+h.imgwidth,e.imgHeight=+h.imgheight),e.angle=+h.angle,3==u&&r(c),u){case 1:i(c),s(c),a(c);break;case 2:i(c);break;case 3:n(c);break;case 4:(function(t){e.scale=1,e.angle=0,r(t)})(c);break;case 5:i(c);break;default:break}}}},t.exports}({exports:{}})}},"637a":function(t,e,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("9b1b")),o=a(i("2634")),s=a(i("2fdc"));i("64aa"),i("bf0f"),i("4db2"),i("c976"),i("4d8f"),i("7b97"),i("668a"),i("c5b7"),i("8ff5"),i("2378"),i("641a"),i("64e0"),i("cce3"),i("efba"),i("d009"),i("bd7d"),i("7edd"),i("d798"),i("f547"),i("5e54"),i("b60a"),i("8c18"),i("12973"),i("f991"),i("198e"),i("8557"),i("63b1"),i("1954"),i("1cf1");var r={name:"tn-cropper",props:{imageUrl:{type:String,default:""},height:{type:Number,default:280},width:{type:Number,default:280},isRound:{type:Boolean,default:!1},borderStyle:{type:String,default:"1rpx solid #FFF"},scaleRatio:{type:Number,default:1},quality:{type:Number,default:.8},returnBase64:{type:Boolean,default:!1},rotateAngle:{type:Number,default:0},minScale:{type:Number,default:.5},maxScale:{type:Number,default:2},custom:{type:Boolean,default:!1},startCutting:{type:Boolean,default:!1},loading:{type:Boolean,default:!0},rotateIcon:{type:String,default:"circle-arrow"}},data:function(){return{CANVAS_ID:"tn-cropper-canvas",TIME_CUT_CENTER:null,ctx:null,cutX:0,cutY:0,imgWidth:0,imgHeight:0,imgTop:0,imgLeft:0,scale:1,angle:0,animation:!1,animationTime:null,systemInfo:{},props:"1,1",sizeChange:0,angleChange:0,resetChange:0,centerChange:0}},watch:{imageUrl:function(t){var e=this;this.imageReset(),this.showLoading(),uni.getImageInfo({src:t,success:function(t){e.imgComputeSize(t.width,t.height),e.angleChange++,e.props="3,".concat(e.angleChange)},fail:function(t){console.log(t),e.imgComputeSize(),e.angleChange++,e.props="3,".concat(e.angleChange)}})},rotateAngle:function(t){this.animation=!0,this.angle=t,this.angleChanged(t)},animation:function(t){var e=this;clearTimeout(this.animationTime),t&&(this.animationTime=setTimeout((function(){e.animation=!1}),200))},startCutting:function(t){this.custom&&t&&this.getCutImage()}},mounted:function(){var t=this;this.systemInfo=uni.getSystemInfoSync(),this.imgTop=this.systemInfo.windowHeight/2,this.imgLeft=this.systemInfo.windowWidth/2,this.ctx=uni.createCanvasContext(this.CANVAS_ID,this),this.$nextTick((function(){t.props="1,1"})),setTimeout((function(){t.$emit("ready",{})}),200)},methods:{getLocalImage:function(t){return(0,s.default)((0,o.default)().mark((function e(){return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,i){uni.downloadFile({url:t,success:function(t){e(t.tempFilePath)},fail:function(t){i(!1)}})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},getCutImage:function(){var t=this;if(this.imageUrl){this.loading&&this.showLoading();var e=function(){var e=(0,s.default)((0,o.default)().mark((function e(){var i,a,s,r,c,d,l,u;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=t.imgWidth*t.scale*t.scaleRatio,a=t.imgHeight*t.scale*t.scaleRatio,s=t.imgLeft-t.cutX,r=t.imgTop-t.cutY,c=t.imageUrl,t.ctx.translate(s*t.scaleRatio,r*t.scaleRatio),t.isRound&&(d=t.width>t.height?Math.floor(t.height/2):Math.floor(t.width/2),l=Math.floor(t.width/2),u=Math.floor(t.height/2),t.ctx.beginPath(),t.ctx.arc(l-s*t.scaleRatio,u-r*t.scaleRatio,d,0,360*Math.PI/180),t.ctx.closePath(),t.ctx.stroke(),t.ctx.clip()),t.ctx.rotate(t.angle*Math.PI/180),t.ctx.drawImage(c,-i/2,-a/2,i,a),t.ctx.draw(!1,(function(){var e={width:t.width*t.scaleRatio,height:Math.round(t.height*t.scaleRatio),destWidth:t.width*t.scaleRatio,destHeight:Math.round(t.height)*t.scaleRatio,fileType:"png",quality:t.quality},i={url:"",base64:"",width:t.width*t.scaleRatio,height:t.height*t.scaleRatio};t.returnBase64;uni.canvasToTempFilePath((0,n.default)((0,n.default)({},e),{},{canvasId:t.CANVAS_ID,success:function(e){i.url=e.tempFilePath,i.base64=e.tempFilePath,t.loading&&uni.hideLoading(),t.$emit("cropper",i)}}),t)}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}else uni.showToast({title:"请选择图片",icon:"none"})},change:function(t){this.cutX=t.cutX||0,this.cutY=t.cutY||0,this.imgWidth=t.imgWidth||this.imgWidth,this.imgHeight=t.imgHeight||this.imgHeight,this.scale=t.scale||1,this.angle=t.angle||0,this.imgTop=t.imgTop||0,this.imgLeft=t.imgLeft||0},imageReset:function(){this.scale=1,this.angle=0;var t=this.systemInfo.windowHeight?this.systemInfo:uni.getSystemInfoSync();this.imgTop=t.windowHeight/2,this.imgLeft=t.windowWidth/2,this.resetChange++,this.props="4,".concat(this.resetChange),this.$emit("initAngle",{})},imgComputeSize:function(t,e){var i=t,a=e;if(i&&a)i/a>this.width/this.height?(a=this.height,i=t/e*a):(i=this.width,a=e/t*i);else{var n=this.systemInfo.windowHeight?this.systemInfo:uni.getSystemInfoSync();i=n.windowWidth,a=0}this.imgWidth=i,this.imgHeight=a,this.sizeChange++,this.props="2,".concat(this.sizeChange)},imageLoad:function(t){this.imageReset(),uni.hideLoading(),this.$emit("imageLoad",{})},moveStop:function(){var t=this;clearTimeout(this.TIME_CUT_CENTER),this.TIME_CUT_CENTER=setTimeout((function(){t.centerChange++,t.props="5,".concat(t.centerChange)}),688)},moveDuring:function(){clearTimeout(this.TIME_CUT_CENTER)},showLoading:function(){uni.showLoading({title:"请稍等......",mask:!0})},stop:function(){},back:function(){this.$emit("closecopper",!0)},angleChanged:function(t){this.moveStop(),t%90&&(this.angle=90*Math.round(t/90)),this.angleChange++,this.props="3,".concat(this.angleChange)},setAngle:function(){this.animation=!0,this.angle=this.angle+90,this.angleChanged(this.angle)}}};e.default=r},"6dba":function(t,e,i){var a=i("b30c");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("3345a19c",a,!0,{sourceMap:!1,shadowMode:!1})},"76c0":function(t,e,i){"use strict";i.r(e);var a=i("b69e"),n=i("0adc");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("b762");var s=i("828b"),r=i("4813"),c=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"5225c41f",null,!1,a["a"],void 0);"function"===typeof r["a"]&&Object(r["a"])(c),e["default"]=c.exports},"7cff":function(t,e,i){"use strict";i.r(e);var a=i("05f3"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"7f6c":function(t,e,i){var a=i("0010");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("21668449",a,!0,{sourceMap:!1,shadowMode:!1})},9799:function(t,e,i){var a=i("a074");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("50561310",a,!0,{sourceMap:!1,shadowMode:!1})},a074:function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 下方引入的为Tuniao UI的集成样式文件，为scss预处理器，其中包含了一些"tn-"开头的自定义变量\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\n * Tuniao UI自定义的css类名和scss变量，均以"tn-"开头，不会造成冲突，请放心使用 \n */.tn-cropper[data-v-5225c41f]{width:100vw;height:100vh;background:linear-gradient(-120deg,#f15bb5,#9a5ce5,#01beff,#00f5d4);position:fixed;top:0;left:0;z-index:1111111}.tn-cropper__image[data-v-5225c41f]{width:100%;border-style:none;position:absolute;top:0;left:0;z-index:2;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform-origin:center;transform-origin:center}.tn-cropper__canvas[data-v-5225c41f]{position:fixed;z-index:10;left:-2000px;top:-2000px;pointer-events:none}.tn-cropper__wrapper[data-v-5225c41f]{position:fixed;z-index:4;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);border:3000px solid rgba(0,0,0,.55);pointer-events:none;box-sizing:initial}.tn-cropper__border[data-v-5225c41f]{position:absolute;left:0;top:0;width:100%;height:100%;box-sizing:border-box;pointer-events:none}.tn-cropper__tabbar[data-v-5225c41f]{width:100%;height:%?120?%;padding:0 %?40?%;box-sizing:border-box;position:fixed;left:0;bottom:0;z-index:99;display:flex;align-items:center;justify-content:space-between;color:#fff;font-size:%?32?%}.tn-cropper__tabbar[data-v-5225c41f]::after{content:"";position:absolute;top:0;right:0;left:0;border-top:%?1?% solid hsla(0,0%,100%,.2);-webkit-transform:scaleY(.5) translateZ(0);transform:scaleY(.5) translateZ(0);-webkit-transform-origin:0 100%;transform-origin:0 100%}.tn-cropper__tabbar__btn[data-v-5225c41f]{height:%?80?%;display:flex;align-items:center}.tn-cropper__tabbar__rotate[data-v-5225c41f]{width:%?44?%;height:%?44?%;font-size:%?40?%;text-align:center}',""]),t.exports=e},a11b:function(t,e,i){"use strict";var a=i("6dba"),n=i.n(a);n.a},b079:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-button",{staticClass:"tn-btn-class tn-btn",class:[t.buttonClass,t.backgroundColorClass,t.fontColorClass],style:[t.buttonStyle],attrs:{"hover-class":"tn-hover",loading:t.loading,disabled:t.disabled,"form-type":t.formType,"open-type":t.openType},on:{getuserinfo:function(e){arguments[0]=e=t.$handleEvent(e),t.handleGetUserInfo.apply(void 0,arguments)},getphonenumber:function(e){arguments[0]=e=t.$handleEvent(e),t.handleGetPhoneNumber.apply(void 0,arguments)},contact:function(e){arguments[0]=e=t.$handleEvent(e),t.handleContact.apply(void 0,arguments)},error:function(e){arguments[0]=e=t.$handleEvent(e),t.handleError.apply(void 0,arguments)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleClick.apply(void 0,arguments)}}},[t._t("default")],2)},n=[]},b30c:function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 下方引入的为Tuniao UI的集成样式文件，为scss预处理器，其中包含了一些"tn-"开头的自定义变量\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\n * Tuniao UI自定义的css类名和scss变量，均以"tn-"开头，不会造成冲突，请放心使用 \n */.tn-btn[data-v-778c77a3]{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;line-height:1;text-align:center;text-decoration:none;overflow:visible;-webkit-transform:translate(%?0?%,%?0?%);transform:translate(%?0?%,%?0?%);border-radius:%?12?%;margin:0}.tn-btn--plain[data-v-778c77a3]{background-color:initial!important;background-image:none}.tn-btn--plain.tn-round[data-v-778c77a3]{border-radius:%?1000?%!important}',""]),t.exports=e},b69e:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"tn-cropper-class tn-cropper",on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.stop.apply(void 0,arguments)}}},[t.imageUrl?i("v-uni-image",{staticClass:"tn-cropper__image",style:{width:(t.imgWidth?t.imgWidth:t.width)+"px",height:(t.imgHeight?t.imgHeight:t.height)+"px",transitionDuration:(t.animation?.3:0)+"s"},attrs:{src:t.imageUrl,mode:"widthFix","data-minScale":t.minScale,"data-maxScale":t.maxScale},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoad.apply(void 0,arguments)},error:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoad.apply(void 0,arguments)},touchstart:function(e){e=t.$handleWxsEvent(e),t.wxs.touchStart(e,t.$getComponentDescriptor())},touchmove:function(e){e=t.$handleWxsEvent(e),t.wxs.touchMove(e,t.$getComponentDescriptor())},touchend:function(e){e=t.$handleWxsEvent(e),t.wxs.touchEnd(e,t.$getComponentDescriptor())}}}):t._e(),i("v-uni-view",{staticClass:"tn-cropper__wrapper",style:{width:t.width+"px",height:t.height+"px",borderRadius:t.isRound?"50%":"0"}},[i("v-uni-view",{wxsProps:{"change:prop":"props"},staticClass:"tn-cropper__border",style:{border:t.borderStyle,borderRadius:t.isRound?"50%":"0"},attrs:{prop:t.props,"change:prop":t.wxs.propsChange,"data-width":t.width,"data-height":t.height,"data-windowHeight":t.systemInfo.windowHeight||600,"data-windowWidth":t.systemInfo.windowWidth||400,"data-imgTop":t.imgTop,"data-imgWidth":t.imgWidth,"data-imgHeight":t.imgHeight,"data-angle":t.angle}})],1),i("v-uni-canvas",{staticClass:"tn-cropper__canvas",style:{width:t.width*t.scaleRatio+"px",height:t.height*t.scaleRatio+"px"},attrs:{"canvas-id":t.CANVAS_ID,id:t.CANVAS_ID,"disable-scroll":!0}}),t.custom?t._e():i("v-uni-view",{staticClass:"tn-cropper__tabbar"},[i("v-uni-view",{staticClass:"tn-cropper__tabbar__btn tn-cropper__tabber__cancel",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-view",{class:["tn-icon-"+t.rotateIcon],staticStyle:{width:"62px",height:"22px","font-size":"16px","text-align":"center"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.setAngle.apply(void 0,arguments)}}},[t._v("旋转")]),i("v-uni-view",{staticClass:"tn-cropper__tabbar__btn tn-cropper__tabber__confirm",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.getCutImage.apply(void 0,arguments)}}},[t._v("完成")])],1)],1)},n=[]},b708:function(t,e,i){"use strict";var a=i("7f6c"),n=i.n(a);n.a},b762:function(t,e,i){"use strict";var a=i("9799"),n=i.n(a);n.a},daee:function(t,e,i){"use strict";i.r(e);var a=i("2ab5"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},e6cc:function(t,e,i){"use strict";i.r(e);var a=i("3f53"),n=i("daee");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("b708");var s=i("828b"),r=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"2dd72608",null,!1,a["a"],void 0);e["default"]=r.exports}}]);